
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基本情報技術者試験 暗記アプリ</title>
    <style>
        /* 簡易的なTailwind CSS風のユーティリティクラス（CDNの代わり） */
        /* 基本スタイル */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
        }

        .min-h-screen { min-height: 100vh; }
        .p-4 { padding: 1rem; }
        .font-sans { font-family: sans-serif; }
        .text-center { text-align: center; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mt-6 { margin-top: 1.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .w-full { width: 100%; }
        .float-right { float: right; }
        .flex { display: flex; }
        .justify-between { justify-content: space-between; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }

        /* テキスト */
        .text-2xl { font-size: 1.5rem; }
        .text-xl { font-size: 1.25rem; }
        .text-lg { font-size: 1.125rem; }
        .text-sm { font-size: 0.875rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .text-gray-100 { color: #f3f4f6; }
        .text-gray-500 { color: #6b7281; }
        .text-gray-600 { color: #4b5563; }
        .text-gray-700 { color: #374151; }
        .text-white { color: #ffffff; }

        /* 背景 */
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-gray-500 { background-color: #6b7281; }
        .bg-green-500 { background-color: #22c55e; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-yellow-500 { background-color: #eab308; }

        /* コンポーネント */
        .card {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            max-width: 600px; /* PCでも見やすいように最大幅を設定 */
            margin: 1rem auto;
        }

        .btn {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-sizing: border-box; /* paddingを含めてwidth: 100%にするため */
            text-align: center;
        }

        .btn:active {
            transform: translateY(1px);
            opacity: 0.9;
        }

        /* ボタン色 */
        .btn-primary {
            background-color: #3b82f6; /* bg-blue-500 */
            color: white;
        }
        .btn-secondary {
            background-color: #6b7281; /* bg-gray-500 */
            color: white;
        }
        .btn-accent {
            background-color: #eab308; /* bg-yellow-500 */
            color: white;
        }

        /* 選択肢ボタン */
        .btn-option {
            background-color: #f3f4f6; /* bg-gray-100 */
            color: #374151; /* text-gray-700 */
            border: 1px solid #d1d5db; /* border-gray-300 */
            text-align: left;
        }
        .btn-option:hover {
            background-color: #e5e7eb; /* bg-gray-200 */
        }

        /* 選択肢の回答後スタイル */
        .btn-option.correct {
            background-color: #d1fae5; /* bg-green-100 */
            border-color: #10b981; /* border-green-500 */
            color: #065f46; /* text-green-800 */
            font-weight: 700;
        }
        .btn-option.incorrect {
            background-color: #fee2e2; /* bg-red-100 */
            border-color: #f87171; /* border-red-400 */
            color: #991b1b; /* text-red-800 */
            opacity: 0.7;
        }
        .btn-option:disabled {
            cursor: not-allowed;
        }


        .badge {
            display: inline-block;
            background-color: #e0e7ff; /* bg-indigo-100 */
            color: #3730a3; /* text-indigo-800 */
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* rounded-full */
            font-size: 0.875rem;
            font-weight: 600;
        }

        .min-h-\[5em\] {
            min-height: 5em;
        }

        /* 画面切り替え */
        .screen {
            display: none; /* デフォルトは非表示 */
        }
        .screen.active {
            display: block; /* activeクラスで表示 */
        }

        /* 汎用クラス */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <!-- メインのコンテナ -->
    <div id="app-container" class="bg-gray-100 min-h-screen p-4 font-sans">

        <!-- 画面1: ホーム（メニュー）画面 -->
        <div id="home-screen" class="screen active">
            <div class="card">
                <h1 class="text-2xl font-bold text-center mb-6">基本情報 暗記アプリ</h1>
                <p class="text-center text-gray-600 mb-8">モードを選んでください</p>
                
                <!-- モード選択ボタン -->
                <button data-mode="sequential" class="btn btn-primary w-full mb-4">
                    順番にスタート
                </button>
                <button data-mode="random" class="btn btn-secondary w-full mb-4">
                    ランダムでスタート
                </button>
                <button data-mode="infinite" class="btn btn-accent w-full">
                    ランダム無限モード
                </button>
            </div>
        </div>

        <!-- 画面2: クイズ画面 -->
        <div id="quiz-screen" class="screen">
            <div class="card">
                <!-- 問題カテゴリと番号 -->
                <div class="mb-4">
                    <span id="quiz-category" class="badge">カテゴリ</span>
                    <span id="quiz-progress" class="text-gray-500 text-sm float-right">1 / 10</span>
                </div>

                <!-- 問題文 -->
                <div id="question-area" class="text-lg font-semibold mb-6 min-h-[5em]">
                    ここに問題文が表示されます...
                </div>

                <!-- 選択肢コンテナ -->
                <div id="options-container" class="space-y-3 mb-6">
                    <!-- 選択肢ボタンは JavaScript によって動的に生成されます -->
                </div>

                <!-- フィードバック（正解・不正解・解説）エリア -->
                <div id="feedback-area" class="hidden">
                    <div id="feedback-result" class="text-xl font-bold mb-2">
                        <!-- '正解！' または '不正解...' が表示されます -->
                    </div>
                    <div id="feedback-explanation" class="text-gray-700 bg-gray-100 p-3 rounded-lg">
                        <!-- ここに解説文が表示されます -->
                    </div>
                </div>

                <!-- ナビゲーションボタン -->
                <div class="mt-6 flex justify-between">
                    <button id="home-button" class="btn btn-secondary">ホームに戻る</button>
                    <button id="next-button" class="btn btn-primary hidden">次へ</button>
                </div>
            </div>
        </div>

        <!-- 画面3: 完了画面 -->
        <div id="result-screen" class="screen">
            <div class="card text-center">
                <h2 class="text-2xl font-bold mb-4">お疲れ様でした！</h2>
                <p id="result-summary" class="text-lg mb-8">10問中 8問正解しました。</p>
                <button id="restart-button" class="btn btn-primary w-full mb-4">
                    もう一度 (
                    <span id="restart-mode-text"></span>
                    )
                </button>
                <button id="back-to-home-button" class="btn btn-secondary w-full">
                    ホームに戻る
                </button>
            </div>
        </div>

    </div>

    <script>
/**
 * ============================================
 * 問題データ
 * ============================================
 */
const problemData = [
    {
        "id": 1,
        "category": "基本情報 R5/06",
        "question": "浮動小数点演算において、絶対値の大きな数と絶対値の小さな数の加減算を行ったとき、絶対値の小さな数の有効桁の一部又は全部が結果に反映されないことを何というか。",
        "options": [
            "打切り誤差",
            "桁落ち",
            "情報落ち",
            "絶対誤差"
        ],
        "correctAnswer": "情報落ち",
        "explanation": "正解は「情報落ち」です。絶対値が大きく異なる2つの数の加減算で、小さい方の数が計算結果に反映されなくなる現象を情報落ちといいます。"
    },
    {
        "id": 3,
        "category": "基本情報 R5/06",
        "question": "逆ポーランド表記法(後置表記法)で、\"EF-G/ CD-AB+++\" と表現される式はどれか。",
        "options": [
            "((A+B)+(C-D)) ÷ G-(E ÷ F)",
            "((A+B) ÷ (C-D))+G ÷ (E-F)",
            "((E-F) ÷ G)+((C-D) ÷ (A+B))",
            "((E-F) ÷ G) ÷ ((C-D)+(A+B))"
        ],
        "correctAnswer": "((E-F) ÷ G)+((C-D) ÷ (A+B))",
        "explanation": "正解は「((E-F) ÷ G)+((C-D) ÷ (A+B))」です。逆ポーランド記法は、演算子がオペランドの後に来ます。左から順にスタックに積み、演算子が出てきたらスタックから2つ取り出して計算します。"
    },
    {
        "id": 4,
        "category": "基本情報 R5/06",
        "question": "コンピュータで連立一次方程式の解を求めるのに、式に含まれる未知数の個数の 3 乗に比例する計算時間が掛かるとする。あるコンピュータで100元連立一次方程式の解を求めるのに2秒掛かったとすると、その4倍の演算速度をもつコンピュータで 1,000元連立一次方程式の解を求めるときの計算時間は何秒か。",
        "options": [
            "5",
            "50",
            "500",
            "5,000"
        ],
        "correctAnswer": "500",
        "explanation": "正解は「500」です。未知数が100個→1000個で10倍になったので、計算量は10の3乗=1000倍になります。一方、コンピュータの性能は4倍なので、計算時間は 2秒 × 1000倍 ÷ 4倍 = 500秒 となります。"
    },
    {
        "id": 6,
        "category": "基本情報 R5/06",
        "question": "昇順に整列されたn個のデータが配列に格納されている。探索したい値を2分探索法で探索するときの、およその比較回数を求める式はどれか。",
        "options": [
            "log₂ n",
            "(log₂ n + 1) / 2",
            "n",
            "n / 2"
        ],
        "correctAnswer": "log₂ n",
        "explanation": "正解は「log₂ n」です。2分探索法（バイナリサーチ）は、探索範囲を半分にしながら探索を進めるため、計算量は対数時間 O(log n) となります。"
    },
    {
        "id": 7,
        "category": "基本情報 R5/06",
        "question": "あるプログラムAの処理が終了していないときに、別のプログラムから再度呼び出されても正しく動作するとき、このプログラムAの性質を何と呼ぶか。",
        "options": [
            "再帰的",
            "再使用可能",
            "再入可能",
            "再配置可能"
        ],
        "correctAnswer": "再入可能",
        "explanation": "正解は「再入可能」です。再入可能（リエントラント）は、複数のタスクから同時に（割り込みなどで）呼び出されても、それぞれのタスクで正しく動作する性質を指します。"
    },
    {
        "id": 8,
        "category": "基本情報 R5/06",
        "question": "1GHz のクロックで動作するCPUがある。このCPUは、機械語の1命令を平均0.8クロックで実行できることが分かっている。このCPUは1秒間に平均何万命令を実行できるか。",
        "options": [
            "125",
            "250",
            "80,000",
            "125,000"
        ],
        "correctAnswer": "125,000",
        "explanation": "正解は「125,000」です。1GHzは1秒間に10億クロック。1命令に0.8クロックかかるので、1秒間の命令数は 10億クロック ÷ 0.8クロック/命令 = 12.5億命令。万命令単位にすると 125,000万命令となります。"
    },
    {
        "id": 9,
        "category": "基本情報 R5/06",
        "question": "メモリインタリーブの説明として、適切なものはどれか。",
        "options": [
            "新しい情報をキャッシュメモリに取り出すとき、キャッシュ上では不要になった情報を主記憶に書き込む。",
            "主記憶のアクセス時間と磁気ディスクのアクセス時間とのギャップを補う。",
            "主記憶の更新と同時にキャッシュメモリの更新を行う。",
            "主記憶を幾つかの区画に分割し、連続したメモリアドレスへのアクセスを高速化する。"
        ],
        "correctAnswer": "主記憶を幾つかの区画に分割し、連続したメモリアドレスへのアクセスを高速化する。",
        "explanation": "正解は「主記憶を幾つかの区画に分割し、連続したメモリアドレスへのアクセスを高速化する。」です。主記憶を複数のバンクに分け、連続するアドレスを各バンクに割り振ることで、CPUからのアクセスを並列化し、実効的なアクセス時間を短縮する技術です。"
    },
    {
        "id": 10,
        "category": "基本情報 R5/06",
        "question": "RAID 1~5の方式の違いは、何に基づいているか。",
        "options": [
            "構成する磁気ディスク装置のアクセス性能",
            "コンピュータ本体とのインタフェース",
            "磁気ディスク装置の信頼性を示す MTBF の値",
            "データ及び冗長ビットの記録方法と記録位置との組合せ"
        ],
        "correctAnswer": "データ及び冗長ビットの記録方法と記録位置との組合せ",
        "explanation": "正解は「データ及び冗長ビットの記録方法と記録位置との組合せ」です。RAIDのレベル（RAID0, 1, 5, 6など）は、データをどのように分散（ストライピング）し、冗長性（ミラーリングやパリティ）をどのように持たせるかの組み合わせによって定義されます。"
    },
    {
        "id": 12,
        "category": "基本情報 R5/06",
        "question": "MTBF と MTTR に関する記述として、適切なものはどれか。",
        "options": [
            "エラーログや命令トレースの機能によって、MTTR は長くなる。",
            "遠隔保守によって、システムのMTBFは短くなり、MTTR は長くなる。",
            "システムを構成する装置の種類が多いほど、システムのMTBFは長くなる。",
            "予防保守によって、システムのMTBF は長くなる。"
        ],
        "correctAnswer": "予防保守によって、システムのMTBF は長くなる。",
        "explanation": "正解は「予防保守によって、システムのMTBF は長くなる。」です。MTBF(平均故障間隔)は故障から次の故障までの平均時間で、長いほど信頼性が高いことを示します。予防保守は故障を未然に防ぐ活動なので、MTBFを長くする効果があります。"
    },
    {
        "id": 13,
        "category": "基本情報 R5/06",
        "question": "出力待ちの印刷要求を、同一機種の3台のプリンタ A~CのうちAから順に空いているプリンタに割り当てる (Cの次は再びAに戻る) システムがある。印刷要求の印刷時間が出力待ちの順に、5, 12, 4, 3, 10, 4 (分) である場合、印刷に要した時間が長い順にプリンタを並べたものはどれか。ここで、初期状態ではプリンタは全て空いているものとする。",
        "options": [
            "A, B, C",
            "B, A, C",
            "B, C, A",
            "C, B, A"
        ],
        "correctAnswer": "A, B, C",
        "explanation": "A: 5分, B: 12分, C: 4分。次に空くのはC(4分後)。次の3分はCへ(C合計7分)。次に空くのはA(5分後)。次の10分はAへ(A合計15分)。次に空くのはC(7分後)。次の4分はCへ(C合計11分)。結果、A:15分, B:12分, C:11分。よって長い順はA, B, Cとなります。"
    },
    {
        "id": 14,
        "category": "基本情報 R5/06",
        "question": "次の一連の3アドレス命令で得られる結果xを表す式はどれか。ここで、3アドレス命令では、三つのオペランドを用いた命令 “c← a op b” を “op (a, b, c)” と表記する。また、opは一つの演算子を表し、結果xを表す式における演算子は ×,÷,+,−の順に優先される。\n(c, d, w1)\n+(b, w1, w2)\n/(e, f, w3)\n-(w3, g, w4)\n×(w2, w4, x)",
        "options": [
            "b+c+d×e÷f-g",
            "b+c+d×(e÷f-g)",
            "(b+c÷d)×e÷f-g",
            "(b+c÷d)×(e÷f-g)"
        ],
        "correctAnswer": "(b+c÷d)×(e÷f-g)",
        "explanation": "各行を式に変換します。w1 = c÷d, w2 = b+w1, w3 = e÷f, w4 = w3-g, x = w2×w4。これらを代入していくと、x = (b + (c÷d)) × ((e÷f) - g) となります。"
    },
    {
        "id": 15,
        "category": "基本情報 R5/06",
        "question": "Hadoop の説明はどれか。",
        "options": [
            "Java EE 仕様に準拠したアプリケーションサーバ",
            "Linuxや Windows などの様々なプラットフォーム上で動作する Web サーバ",
            "機能の豊富さが特徴の RDBMS",
            "大規模なデータセットを分散処理するためのソフトウェアライブラリ"
        ],
        "correctAnswer": "大規模なデータセットを分散処理するためのソフトウェアライブラリ",
        "explanation": "正解は「大規模なデータセットを分散処理するためのソフトウェアライブラリ」です。Hadoopは、多数のコンピュータにまたがって大規模データを効率的に処理・管理するためのオープンソースのフレームワークです。"
    },
    {
        "id": 16,
        "category": "基本情報 R5/06",
        "question": "機械式接点の押しボタンスイッチを1回押したときに、押してから数ミリ秒の間, 複数回のON, OFF が発生する現象はどれか。",
        "options": [
            "サンプリング",
            "シェアリング",
            "チャタリング",
            "バッファリング"
        ],
        "correctAnswer": "チャタリング",
        "explanation": "正解は「チャタリング」です。機械的なスイッチの接点が、接触する際に微細な振動を起こし、短時間にON/OFFを繰り返す現象を指します。"
    },
    {
        "id": 18,
        "category": "基本情報 R5/06",
        "question": "関係データベースの主キー制約の条件として、キー値が重複していないことの他に、主キーを構成する列に必要な条件はどれか。",
        "options": [
            "キー値が空でないこと",
            "構成する列が一つであること",
            "表の先頭に定義されている列であること",
            "別の表の候補キーとキー値が一致していること"
        ],
        "correctAnswer": "キー値が空でないこと",
        "explanation": "正解は「キー値が空でないこと」です。主キー制約は、レコードを一意に識別するための制約であり、「一意性制約（重複不可）」と「NOT NULL制約（NULL値不可）」の2つで構成されます。"
    },
    {
        "id": 20,
        "category": "基本情報 R5/06",
        "question": "埋込み SQL において、問合せによって得られた導出表を1行ずつ親プログラムに引き渡す操作がある。この操作と関係の深い字句はどれか。",
        "options": [
            "CURSOR",
            "ORDER BY",
            "UNION",
            "UNIQUE"
        ],
        "correctAnswer": "CURSOR",
        "explanation": "正解は「CURSOR」です。カーソルは、SQLの問合せ結果（複数行）をメモリ上に保持し、プログラムがそこから1行ずつデータを取り出すための仕組みです。"
    },
    {
        "id": 22,
        "category": "基本情報 R5/06",
        "question": "ロックの両立性に関する記述のうち、適切なものはどれか。",
        "options": [
            "トランザクション T₁が共有ロックを獲得している資源に対して、トランザクション T₂は共有ロックと専有ロックのどちらも獲得することができる。",
            "トランザクション T₁が共有ロックを獲得している資源に対して、トランザクション T₂ は共有ロックを獲得することはできるが、専有ロックを獲得することはできない。",
            "トランザクション T₁が専有ロックを獲得している資源に対して、トランザクション T₂は専有ロックと共有ロックのどちらも獲得することができる。",
            "トランザクション T₁が専有ロックを獲得している資源に対して、トランザクション T₂は専有ロックを獲得することはできるが、共有ロックを獲得することはできない。"
        ],
        "correctAnswer": "トランザクション T₁が共有ロックを獲得している資源に対して、トランザクション T₂ は共有ロックを獲得することはできるが、専有ロックを獲得することはできない。",
        "explanation": "正解は「トランザクション T₁が共有ロックを獲得している資源に対して、トランザクション T₂ は共有ロックを獲得することはできるが、専有ロックを獲得することはできない。」です。共有ロック（読み取りロック）同士は両立しますが、共有ロックと専有ロック（書き込みロック）、専有ロック同士は両立しません。"
    },
    {
        "id": 25,
        "category": "基本情報 R5/06",
        "question": "TCP/IP ネットワークでDNS が果たす役割はどれか。",
        "options": [
            "PCやプリンタなどからの IP アドレス付与の要求に対して、サーバに登録してあるIPアドレスの中から使用されていないIPアドレスを割り当てる。",
            "サーバにあるプログラムを、サーバの IP アドレスを意識することなく、プログラム名の指定だけで呼び出すようにする。",
            "社内のプライベートIPアドレスをグローバルIPアドレスに変換し、インターネットへのアクセスを可能にする。",
            "ドメイン名やホスト名などとIPアドレスとを対応付ける。"
        ],
        "correctAnswer": "ドメイン名やホスト名などとIPアドレスとを対応付ける。",
        "explanation": "正解は「ドメイン名やホスト名などとIPアドレスとを対応付ける。」です。DNS(Domain Name System)は、人間が覚えやすいドメイン名（例: www.example.com）を、コンピュータが通信に使うIPアドレス（例: 192.0.2.1）に変換する（名前解決）仕組みです。"
    },
    {
        "id": 26,
        "category": "基本情報 R5/06",
        "question": "ONF (Open Networking Foundation) が標準化を進めている OpenFlow プロトコルを用いた SDN (Software-Defined Networking) の説明として、適切なものはどれか。",
        "options": [
            "管理ステーションから定期的にネットワーク機器の MIB (Management Information Base) 情報を取得して、稼働監視や性能管理を行うためのネットワーク管理手法",
            "データ転送機能をもつネットワーク機器同士が経路情報を交換して、ネットワーク全体のデータ転送経路を決定する方式",
            "ネットワーク制御機能とデータ転送機能を実装したソフトウェアを、仮想環境で利用するための技術",
            "ネットワーク制御機能とデータ転送機能を論理的に分離し、コントローラと呼ばれるソフトウェアで、データ転送機能をもつネットワーク機器の集中制御を可能とするアーキテクチャ"
        ],
        "correctAnswer": "ネットワーク制御機能とデータ転送機能を論理的に分離し、コントローラと呼ばれるソフトウェアで、データ転送機能をもつネットワーク機器の集中制御を可能とするアーキテクチャ",
        "explanation": "正解は「ネットワーク制御機能とデータ転送機能を論理的に分離し、コントローラと呼ばれるソフトウェアで、データ転送機能をもつネットワーク機器の集中制御を可能とするアーキテクチャ」です。SDNはネットワークの制御(Control Plane)と転送(Data Plane)を分離するアーキテクチャで、これによりネットワーク構成を柔軟かつ動的に変更できます。"
    },
    {
        "id": 27,
        "category": "基本情報 R5/06",
        "question": "業務への利用には、会社の情報システム部門の許可が本来は必要であるのに、その許可を得ずに勝手に利用されるデバイスやクラウドサービス、ソフトウェアを指す用語はどれか。",
        "options": [
            "シャドーIT",
            "ソーシャルエンジニアリング",
            "ダークネット",
            "バックドア"
        ],
        "correctAnswer": "シャドーIT",
        "explanation": "正解は「シャドーIT」です。情報システム部門の管理下にない（影の）IT機器やサービスが業務利用されることを指し、情報漏洩などのセキュリティリスクの原因となります。"
    },
    {
        "id": 28,
        "category": "基本情報 R5/06",
        "question": "暗号方式に関する記述のうち、適切なものはどれか。",
        "options": [
            "AES は公開鍵暗号方式,RSAは共通鍵暗号方式の一種である。",
            "共通鍵暗号方式では、暗号化及び復号に同一の鍵を使用する。",
            "公開鍵暗号方式を通信内容の秘匿に使用する場合は、暗号化に使用する鍵を秘密にして、復号に使用する鍵を公開する。",
            "デジタル署名に公開鍵暗号方式が使用されることはなく、共通鍵暗号方式が使用される。"
        ],
        "correctAnswer": "共通鍵暗号方式では、暗号化及び復号に同一の鍵を使用する。",
        "explanation": "正解は「共通鍵暗号方式では、暗号化及び復号に同一の鍵を使用する。」です。AESは共通鍵暗号方式、RSAは公開鍵暗号方式です。公開鍵暗号方式で通信を秘匿する場合、受信者の公開鍵で暗号化し、受信者が自身の秘密鍵で復号します。"
    },
    {
        "id": 29,
        "category": "基本情報 R5/06",
        "question": "CAPTCHA の目的はどれか。",
        "options": [
            "Web サイトなどにおいて、コンピュータではなく人間がアクセスしていることを確認する。",
            "公開鍵暗号と共通鍵暗号を組み合わせて、メッセージを効率よく暗号化する。",
            "通信回線を流れるパケットをキャプチャして、パケットの内容の表示や解析、集計を行う。",
            "電子政府推奨暗号の安全性を評価し、暗号技術の適切な実装法,運用法を調査,検討する。"
        ],
        "correctAnswer": "Web サイトなどにおいて、コンピュータではなく人間がアクセスしていることを確認する。",
        "explanation": "正解は「Web サイトなどにおいて、コンピュータではなく人間がアクセスしていることを確認する。」です。CAPTCHAは、歪んだ文字の読み取りなどをユーザーに要求し、プログラム（ボット）による自動アクセスを防ぐための技術です。"
    },
    {
        "id": 31,
        "category": "基本情報 R5/06",
        "question": "IDS の機能はどれか。",
        "options": [
            "PCにインストールされているソフトウェア製品が最新のバージョンであるかどうかを確認する。",
            "検査対象の製品にテストデータを送り、製品の応答や挙動から脆弱性を検出する。",
            "サーバやネットワークを監視し、侵入や侵害を検知した場合に管理者へ通知する。",
            "情報システムの運用管理状況などの情報セキュリティ対策状況と企業情報を入力し、組織の情報セキュリティへの取組み状況を自己診断する。"
        ],
        "correctAnswer": "サーバやネットワークを監視し、侵入や侵害を検知した場合に管理者へ通知する。",
        "explanation": "正解は「サーバやネットワークを監視し、侵入や侵害を検知した場合に管理者へ通知する。」です。IDS (Intrusion Detection System)は侵入検知システムであり、不正アクセスの兆候を検知して管理者に警告する役割を持ちます。"
    },
    {
        "id": 33,
        "category": "基本情報 R5/06",
        "question": "安全な Web アプリケーションの作り方について、攻撃と対策の適切な組合せはどれか。",
        "options": [
            "SQLインジェクション / SQL 文の組立てに静的プレースホルダを使用する。",
            "クロスサイトスクリプティング / 任意の外部サイトのスタイルシートを取り込めるようにする。",
            "クロスサイトリクエストフォージェリ / リクエストに GET メソッドを使用する。",
            "セッションハイジャック / 利用者ごとに固定のセッション ID を使用する。"
        ],
        "correctAnswer": "SQLインジェクション / SQL 文の組立てに静的プレースホルダを使用する。",
        "explanation": "正解は「SQLインジェクション / SQL 文の組立てに静的プレースホルダを使用する。」です。プレースホルダ（バインド機構）は、SQL文の骨格とデータを分離して扱うため、SQLインジェクション攻撃の根本的な対策となります。"
    },
    {
        "id": 35,
        "category": "基本情報 R5/06",
        "question": "オブジェクト指向において、あるクラスの属性や機能がサブクラスで利用できることを何というか。",
        "options": [
            "オーバーライド",
            "カプセル化",
            "継承",
            "多相性"
        ],
        "correctAnswer": "継承",
        "explanation": "正解は「継承」です。継承（インヘリタンス）は、親クラス（スーパークラス）の性質を子クラス（サブクラス）が引き継ぐ仕組みで、コードの再利用性を高めます。"
    },
    {
        "id": 36,
        "category": "基本情報 R5/06",
        "question": "ソフトウェアの使用性を向上させる施策として、適切なものはどれか。",
        "options": [
            "オンラインヘルプを充実させ、利用方法を理解しやすくする。",
            "外部インタフェースを見直し、連携できる他システムを増やす。",
            "機能を追加し、業務の遂行においてシステムを利用できる範囲を拡大する。",
            "データの複製を分散して配置し、装置の故障によるデータ損失のリスクを減らす。"
        ],
        "correctAnswer": "オンラインヘルプを充実させ、利用方法を理解しやすくする。",
        "explanation": "正解は「オンラインヘルプを充実させ、利用方法を理解しやすくする。」です。使用性（ユーザビリティ）は、特定の利用者が特定の状況でシステムを利用する際の「有効さ、効率、満足度」の度合いであり、分かりやすさや使いやすさに関連します。"
    },
    {
        "id": 39,
        "category": "基本情報 R5/06",
        "question": "アジャイル開発のプラクティスの一つである“ふりかえり (レトロスペクティブ)”を行う適切なタイミングはどれか。",
        "options": [
            "“タスクボード”に貼ったタスクカードが移動されたとき",
            "各“イテレーション” の最後",
            "毎日行う “朝会”",
            "毎日メンバの気持ちを見える化する“ニコニコカレンダー”に全チームメンバが記入し終えたとき"
        ],
        "correctAnswer": "各“イテレーション” の最後",
        "explanation": "正解は「各“イテレーション” の最後」です。ふりかえり（レトロスペクティブ）は、イテレーション（またはスプリント）という短い開発サイクルの最後に、チームでプロセスや協力方法を改善するために行われます。"
    },
    {
        "id": 41,
        "category": "基本情報 R5/06",
        "question": "ソフトウェア開発の見積りに使われるファンクションポイント法に関する記述として、適切なものはどれか。",
        "options": [
            "ソースプログラムの行数を基準に、アルゴリズムの複雑さを加味して、ソフトウェアの開発期間を見積もる。",
            "ソフトウェアの規模を基準に、影響要因を表す補正係数を使って、ソフトウェアの開発工数とコストを見積もる。",
            "単位規模当たりの潜在バグ数を予測することによって、ソフトウェアの品質を見積もる。",
            "帳票数,画面数、ファイル数などのデータを基に、システム特性を考慮して、ソフトウェアの規模を見積もる。"
        ],
        "correctAnswer": "帳票数,画面数、ファイル数などのデータを基に、システム特性を考慮して、ソフトウェアの規模を見積もる。",
        "explanation": "正解は「帳票数,画面数、ファイル数などのデータを基に、システム特性を考慮して、ソフトウェアの規模を見積もる。」です。ファンクションポイント法は、利用者の視点からソフトウェアの機能（外部入力、外部出力、外部照会、内部論理ファイル、外部インタフェースファイル）を数え、その複雑さから規模を見積もる手法です。"
    },
    {
        "id": 42,
        "category": "基本情報 R5/06",
        "question": "図に示すアローダイアグラムは、あるシステムの開発作業を表したものである。クリティカルパスはどれか。",
        "options": [
            "A→B→G→L→N",
            "A→B→H→K→N",
            "A→C→I→N",
            "A→D→F→J→M→N"
        ],
        "correctAnswer": "A→C→I→N",
        "explanation": "正解は「A→C→I→N」です。アローダイアグラムにおいて、開始から終了までの経路のうち、作業日数の合計が最も長くなる経路をクリティカルパスと呼びます。この図では複数の最長経路が存在する可能性がありますが、選択肢の中ではこの経路が該当します。（注：問題に図がないため、一般的な解説となります）"
    },
    {
        "id": 43,
        "category": "基本情報 R5/06",
        "question": "サービスデスク組織の構造とその特徴のうち、ローカルサービスデスクのものはどれか。",
        "options": [
            "サービスデスクを1拠点又は少数の場所に集中することによって、サービス要員を効率的に配置したり、大量のコールに対応したりすることができる。",
            "サービスデスクを利用者の近くに配置することによって、言語や文化が異なる利用者への対応、専門要員によるVIP対応などができる。",
            "サービス要員が複数の地域や部門に分散していても、通信技術の利用によって単一のサービスデスクであるかのようにサービスが提供できる。",
            "分散拠点のサービス要員を含めた全員を中央で統括して管理することによって、統制のとれたサービスが提供できる。"
        ],
        "correctAnswer": "サービスデスクを利用者の近くに配置することによって、言語や文化が異なる利用者への対応、専門要員によるVIP対応などができる。",
        "explanation": "正解は「サービスデスクを利用者の近くに配置することによって、言語や文化が異なる利用者への対応、専門要員によるVIP対応などができる。」です。「ローカル」サービスデスクは、物理的に利用者の拠点に設置されるため、地域固有の事情に対応しやすいという特徴があります。"
    },
    {
        "id": 44,
        "category": "基本情報 R5/06",
        "question": "次の処理条件で磁気ディスクに保存されているファイルを磁気テープにバックアップするとき、バックアップの運用に必要な磁気テープは最少で何本か。〔処理条件〕(1) 毎月初日(1日) にフルバックアップを取る。(2) 差分バックアップを毎日取る。(3) 常に6か月前の同一日までのデータについて、復元できるようにする。",
        "options": [
            "12",
            "13",
            "14",
            "15"
        ],
        "correctAnswer": "14",
        "explanation": "正解は「14」です。常に6か月前のデータを復元可能にするには、7か月分のテープが必要です（例: 7月31日に6ヶ月前の1月31日のデータを復元するには1月のテープが必要）。フルバックアップは月1回なので7本。差分バックアップは世代管理が必要なので、これも7ヶ月分（7本）必要です。合計 7 + 7 = 14本となります。"
    },
    {
        "id": 49,
        "category": "基本情報 R5/06",
        "question": "多角化戦略のうち、M&Aによる垂直統合に該当するものはどれか。",
        "options": [
            "銀行による保険会社の買収・合併",
            "自動車メーカによる軽自動車メーカの買収・合併",
            "製鉄メーカによる鉄鋼石採掘会社の買収・合併",
            "電機メーカによる不動産会社の買収・合併"
        ],
        "correctAnswer": "製鉄メーカによる鉄鋼石採掘会社の買収・合併",
        "explanation": "正解は「製鉄メーカによる鉄鋼石採掘会社の買収・合併」です。垂直統合とは、自社の事業の川上（原材料供給）や川下（販売・流通）の企業を統合することです。製鉄メーカにとって鉄鉱石採掘会社は川上の企業にあたります。"
    },
    {
        "id": 50,
        "category": "基本情報 R5/06",
        "question": "マーケティングミックスの説明はどれか。",
        "options": [
            "顧客市場をある基準で細分化し、その中から最も競争優位に立てる市場を選定すること",
            "市場の成長率と自社の相対的市場シェアの組合せから、各事業の位置づけを明確にし、それぞれの事業の今後の施策を検討すること",
            "製品戦略,価格戦略、チャネル戦略、プロモーション戦略などを適切に組み合わせて、自社製品を効果的に販売していくこと",
            "導入期,成長期,成熟期,衰退期のそれぞれにおいて、市場や競合商品などとの関係を意識した、適切な施策を採っていくこと"
        ],
        "correctAnswer": "製品戦略,価格戦略、チャネル戦略、プロモーション戦略などを適切に組み合わせて、自社製品を効果的に販売していくこと",
        "explanation": "正解は「製品戦略,価格戦略、チャネル戦略、プロモーション戦略などを適切に組み合わせて、自社製品を効果的に販売していくこと」です。これはマーケティングの4P (Product, Price, Place, Promotion) の説明であり、マーケティングミックスの代表的なフレームワークです。"
    },
    {
        "id": 51,
        "category": "基本情報 R5/06",
        "question": "バランススコアカードの学習と成長の視点における戦略目標と業績評価指標の例はどれか。",
        "options": [
            "持続的成長が目標であるので、受注残を指標とする。",
            "主要顧客との継続的な関係構築が目標であるので、クレーム件数を指標とする。",
            "製品開発力の向上が目標であるので、製品開発領域の研修受講時間を指標とする。",
            "製品の納期遵守が目標であるので、製造期間短縮日数を指標とする。"
        ],
        "correctAnswer": "製品開発力の向上が目標であるので、製品開発領域の研修受講時間を指標とする。",
        "explanation": "正解は「製品開発力の向上が目標であるので、製品開発領域の研修受講時間を指標とする。」です。「学習と成長の視点」は、企業の将来的な成長のために、人材、組織、情報システムといった無形資産をどのように向上させるかという視点です。研修時間は人材育成の指標となります。"
    },
    {
        "id": 54,
        "category": "基本情報 R5/06",
        "question": "ある工場では表に示す3製品を製造している。実現可能な最大利益は何円か。ここで、各製品の月間需要量には上限があり、また、製造工程に使える工場の時間は月間 200 時間までで、複数種類の製品を同時に並行して製造することはできないものとする。 (製品X: 利益1800, 6分, 上限1000) (製品Y: 利益2500, 10分, 上限900) (製品Z: 利益3000, 15分, 上限500)",
        "options": [
            "2,625,000",
            "3,000,000",
            "3,150,000",
            "3,300,000"
        ],
        "correctAnswer": "3,300,000",
        "explanation": "時間当たり利益を計算します。X: 1800/6=300円/分, Y: 2500/10=250円/分, Z: 3000/15=200円/分。利益率の高い順(X→Y→Z)に製造します。月間時間は200時間=12000分。まずXを上限の1000個製造(6000分, 180万円)。残り時間は6000分。次にYを残り時間で作れるだけ(6000分/10分=600個)製造(6000分, 150万円)。合計利益は180万+150万=330万円。"
    },
    {
        "id": 55,
        "category": "基本情報 R5/06",
        "question": "シェアリングエコノミーの説明はどれか。",
        "options": [
            "ITの活用によって経済全体の生産性が高まり、更に SCM の進展によって需給ギャップが解消されるので、インフレなき成長が持続するという概念である。",
            "IT を用いて、再生可能エネルギーや都市基盤の効率的な管理・運営を行い、人々の生活の質を高め、継続的な経済発展を実現するという概念である。",
            "商取引において、実店舗販売とインターネット販売を組み合わせ、それぞれの長所を生かして連携させることによって、全体の売上を拡大する仕組みである。",
            "ソーシャルメディアのコミュニティ機能などを活用して、主に個人同士で、個人が保有している遊休資産を共有したり、貸し借りしたりする仕組みである。"
        ],
        "correctAnswer": "ソーシャルメディアのコミュニティ機能などを活用して、主に個人同士で、個人が保有している遊休資産を共有したり、貸し借りしたりする仕組みである。",
        "explanation": "正解は「ソーシャルメディアのコミュニティ機能などを活用して、主に個人同士で、個人が保有している遊休資産を共有したり、貸し借りしたりする仕組みである。」です。シェアリングエコノミーは「共有型経済」とも呼ばれ、モノ、スキル、時間などを個人間で共有・交換して利用する経済モデルです。"
    },
    {
        "id": 57,
        "category": "基本情報 R5/06",
        "question": "図は、定量発注方式の在庫モデルを表している。発注の直後に使用量の予測が変わり、納品の直前の時点における在庫量予測が安全在庫量Sから①で示される X になるとき、発注時点での発注量Eに対する適切な変更はどれか。ここで、発注直後の発注量の変更は可能であり、納品直後の在庫量は最大在庫量を超えてはならないものとする。",
        "options": [
            "E+S-Xを追加発注する。",
            "K+S-Xを追加発注する。",
            "K-Xだけの発注を取り消す。",
            "X-Sだけの発注を取り消す。"
        ],
        "correctAnswer": "X-Sだけの発注を取り消す。",
        "explanation": "正解は「X-Sだけの発注を取り消す。」です。当初、在庫は安全在庫Sまで減ると予測されていました。しかし予測が変わり、実際にはXまでしか減らないことになりました (X > S)。これは、当初の予測よりも (X-S) だけ在庫が多く残ることを意味します。したがって、過剰在庫を防ぐために、発注量Eからその差額分 (X-S) を取り消す（減らす）必要があります。"
    },
    {
        "id": 59,
        "category": "基本情報 R5/06",
        "question": "当期の財務諸表分析の結果が表の値のとき、売上原価は何万円か。(売上原価率 80%, 売上高営業利益率 10%, 営業利益 200万円)",
        "options": [
            "1,400",
            "1,600",
            "1,800",
            "2,000"
        ],
        "correctAnswer": "1,600",
        "explanation": "正解は「1,600」です。まず、営業利益と売上高営業利益率から売上高を求めます。売上高 × 10% = 200万円 なので、売上高 = 200万円 ÷ 0.1 = 2,000万円。次に、売上高と売上原価率から売上原価を求めます。売上原価 = 2,000万円 × 80% = 1,600万円。"
    },
    {
        "id": 60,
        "category": "基本情報 R5/06",
        "question": "A社は顧客管理システムの開発を、情報システム子会社であるB社に委託し、B社は要件定義を行った上で、ソフトウェア設計・プログラミング・ソフトウェアテストまでを、協力会社であるC社に委託した。C社では自社の社員Dにその作業を担当させた。このとき、開発したプログラムの著作権はどこに帰属するか。ここで、関係者の間には、著作権の帰属に関する特段の取決めはないものとする。",
        "options": [
            "A社",
            "B社",
            "C社",
            "社員D"
        ],
        "correctAnswer": "C社",
        "explanation": "正解は「C社」です。著作権法では、特別な契約がない限り、法人（会社）の業務として従業員が作成した著作物（プログラムなど）の著作権は、その法人に帰属します（職務著作）。この場合、実際にプログラムを作成した社員Dが所属するC社に著作権が帰属します。"
    },
    {
        "id": 61,
        "category": "基本情報 R5/07",
        "question": "全体集合S内に異なる部分集合AとBがあるとき、A∪Bの補集合に等しいものはどれか。ここで、A∪BはAとBの和集合, A∩BはAとBの積集合, Aの補集合はSにおけるAの補集合, A-BはAからBを除いた差集合を表す。",
        "options": [
            "Aの補集合 - B",
            "(Aの補集合 ∪ Bの補集合) - (A∩B)",
            "(S-A)∪(S-B)",
            "S-(A∩B)"
        ],
        "correctAnswer": "Aの補集合 - B",
        "explanation": "正解は「Aの補集合 - B」です。ド・モルガンの法則により、A∪Bの補集合は「Aの補集合 ∩ Bの補集合」と等しくなります。また、集合の差の定義から「Aの補集合 - B」は「Aの補集合 ∩ Bの補集合」と等しくなります。したがって、A∪Bの補集合 = Aの補集合 - B が成り立ちます。"
    },
    {
        "id": 62,
        "category": "基本情報 R5/07",
        "question": "正三角形の内部の点から、各辺に下ろした垂線の長さの和は一定である。三角グラフは、この性質を利用して、三つの辺に対応させた要素の割合を表したグラフである。図の三角グラフは、3種類のソフトについて、A~Dの4人の使用率を図示したものである。正しい解釈はどれか。（図は省略）",
        "options": [
            "Aさんは、ワープロソフトだけを使用している。",
            "Bさんは、ほかのソフトに比べて表計算ソフトの使用率が高い。",
            "Cさんは、データベースソフト、表計算ソフト, ワープロソフトの順に使用率が高い。",
            "Dさんは、表計算ソフトを使用していない。"
        ],
        "correctAnswer": "Bさんは、ほかのソフトに比べて表計算ソフトの使用率が高い。",
        "explanation": "正解は「Bさんは、ほかのソフトに比べて表計算ソフトの使用率が高い。」です。三角グラフは、各頂点に近づくほどその要素の割合が高く、対辺に近づくほど割合が低くなります。Bさんは「表計算」の頂点に最も近く、他の2つの辺からは離れているため、表計算ソフトの使用率が最も高いと解釈できます。（問題に図がないため、一般的な読み方に基づく解説です）"
    },
    {
        "id": 63,
        "category": "基本情報 R5/07",
        "question": "次に示す計算式と逆ポーランド表記法の組合せのうち、適切なものはどれか。",
        "options": [
            "計算式: ((a+b)*c)-d, 逆ポーランド表記法: abc*+d-",
            "計算式: (a+(b*c))-d, 逆ポーランド表記法: ab+c*d-",
            "計算式: (a+b)*(c-d), 逆ポーランド表記法: abc*d-+",
            "計算式: a+(b*(c-d)), 逆ポーランド表記法: abcd-*+"
        ],
        "correctAnswer": "計算式: a+(b*(c-d)), 逆ポーランド表記法: abcd-*+",
        "explanation": "正解は「計算式: a+(b*(c-d)), 逆ポーランド表記法: abcd-*+」です。計算式 a+(b*(c-d)) を逆ポーランド記法に変換すると、最も内側の (c-d) が cd- となり、次に b との乗算で bcd-* となり、最後に a との加算で abcd-*+ となります。"
    },
    {
        "id": 65,
        "category": "基本情報 R5/07",
        "question": "空の状態のキューとスタックがある。次の手続を順に実行した場合、変数xに代入されるデータはどれか。[関数] push(y):スタックに積む, pop():スタックから取り出す, enq(y):キューに挿入, deq():キューから取り出す。\n[手続]\npush(a), push(b), enq(pop()), enq(c), push(d), push(deq()), x ← pop()",
        "options": [
            "a",
            "b",
            "c",
            "d"
        ],
        "correctAnswer": "b",
        "explanation": "1. push(a): スタック=[a] 2. push(b): スタック=[a,b] 3. enq(pop()): スタックからbを取り出し(pop)キューへ(enq)。スタック=[a], キュー=[b] 4. enq(c): キュー=[b,c] 5. push(d): スタック=[a,d] 6. push(deq()): キューからbを取り出し(deq)スタックへ(push)。スタック=[a,d,b], キュー=[c] 7. x ← pop(): スタックからbを取り出す。よってxにはbが代入されます。"
    },
    {
        "id": 70,
        "category": "基本情報 R5/07",
        "question": "磁気ディスク装置の性能に関する記述のうち、適切なものはどれか。",
        "options": [
            "アクセス時間は、回転速度を上げるか位置決め時間を短縮すると短くなる。",
            "アクセス時間は、処理装置の前処理時間、データ転送後の後処理時間も含む。",
            "記憶容量は、トラック当たりの記憶容量と1シリンダ当たりのトラック数だけで決まる。",
            "データ転送速度は、回転速度と回転待ち時間で決まる。"
        ],
        "correctAnswer": "アクセス時間は、回転速度を上げるか位置決め時間を短縮すると短くなる。",
        "explanation": "正解は「アクセス時間は、回転速度を上げるか位置決め時間を短縮すると短くなる。」です。磁気ディスクのアクセス時間は主に、①位置決め時間(シーク時間)、②回転待ち時間(サーチ時間)、③データ転送時間の合計です。回転速度を上げると②が短縮され、位置決め時間を短縮すると①が短縮されるため、アクセス時間は短くなります。"
    },
    {
        "id": 73,
        "category": "基本情報 R5/07",
        "question": "仮想記憶方式の一つに、仮想アドレス空間を固定長の領域に分割して管理するものがある。この固定長の領域を示す用語はどれか。",
        "options": [
            "セクタ",
            "セグメント",
            "フレーム",
            "ページ"
        ],
        "correctAnswer": "ページ",
        "explanation": "正解は「ページ」です。仮想記憶を実現するページング方式では、仮想アドレス空間と物理メモリ（主記憶）をそれぞれページ、ページフレームという固定長の領域に分割して管理します。"
    },
    {
        "id": 74,
        "category": "基本情報 R5/07",
        "question": "コンパイラによる最適化の主な目的はどれか。",
        "options": [
            "プログラムの実行時間を短縮する。",
            "プログラムのデバッグを容易にする。",
            "プログラムの保守性を改善する。",
            "目的プログラムを生成する時間を短縮する。"
        ],
        "correctAnswer": "プログラムの実行時間を短縮する。",
        "explanation": "正解は「プログラムの実行時間を短縮する。」です。コンパイラの最適化は、ソースコードの意味を変えずに、より効率的な機械語コードを生成することで、プログラムの実行速度の向上やメモリ使用量の削減を目的とします。"
    },
    {
        "id": 75,
        "category": "基本情報 R5/07",
        "question": "ハッシュ法の説明として、適切なものはどれか。",
        "options": [
            "関数を用いてレコードのキー値からレコードの格納アドレスを求めることによってアクセスする方法",
            "それぞれのレコードに格納されている次のレコードの格納アドレスを用いることによってアクセスする方法",
            "レコードのキー値とレコードの格納アドレスの対応表を使ってアクセスする方法",
            "レコードのキー値をレコードの格納アドレスとして直接アクセスする方法"
        ],
        "correctAnswer": "関数を用いてレコードのキー値からレコードの格納アドレスを求めることによってアクセスする方法",
        "explanation": "正解は「関数を用いてレコードのキー値からレコードの格納アドレスを求めることによってアクセスする方法」です。ハッシュ法（直接アドレッシング法）は、キー値をハッシュ関数という計算式に入れて格納アドレスを算出し、データに直接アクセスする高速な探索手法です。"
    },
    {
        "id": 77,
        "category": "基本情報 R5/07",
        "question": "3次元CGのレンダリングにおける、隠線消去及び隠面消去の説明はどれか。",
        "options": [
            "光源の位置と対象物体への光の当たり具合とを解析し、どのような色・明るさで見えるのかを決定する。",
            "指定された視点から見える部分だけを描くようにする。",
            "生成された画像について、表示する画面に収まる部分だけを表示する。",
            "物体の表面だけでなく物体の内部や背後に隠れた部分の形状も、半透明表示などによって画像として生成する。"
        ],
        "correctAnswer": "指定された視点から見える部分だけを描くようにする。",
        "explanation": "正解は「指定された視点から見える部分だけを描くようにする。」です。隠線消去・隠面消去は、3次元空間の物体を描画する際に、手前の物体に隠れて見えないはずの線や面を描画しないようにする処理のことです。"
    },
    {
        "id": 78,
        "category": "基本情報 R5/07",
        "question": "企業の様々な活動を介して得られた大量のデータを整理・統合して蓄積しておき, 意思決定支援などに利用するものはどれか。",
        "options": [
            "データアドミニストレーション",
            "データウェアハウス",
            "データディクショナリ",
            "データマッピング"
        ],
        "correctAnswer": "データウェアハウス",
        "explanation": "正解は「データウェアハウス」です。データウェアハウス(DWH)は、企業の基幹システムなどから収集したデータを、目的別・時系列に整理・統合して蓄積するデータベースで、主に経営層の意思決定を支援するために利用されます。"
    },
    {
        "id": 79,
        "category": "基本情報 R5/07",
        "question": "“従業員”表を第3正規形にしたものはどれか。ここで、下線部は主キーを表す。\n\n従業員(従業員番号, 従業員氏名, {技能コード, 技能名, 技能経験年数})\n({} は繰返しを表す)",
        "options": [
            "従業員(従業員番号, 従業員氏名), 技能(技能コード, 技能名, 技能経験年数)",
            "従業員(従業員番号, 従業員氏名, 技能コード, 技能経験年数), 技能(技能コード, 技能名)",
            "従業員技能(従業員番号, 技能コード, 技能経験年数), 従業員(従業員番号, 従業員氏名), 技能(技能コード, 技能名)",
            "従業員(従業員番号, 技能コード), 従業員氏名(従業員番号, 従業員氏名, 技能経験年数), 技能(技能コード, 技能名)"
        ],
        "correctAnswer": "従業員技能(従業員番号, 技能コード, 技能経験年数), 従業員(従業員番号, 従業員氏名), 技能(技能コード, 技能名)",
        "explanation": "1.第1正規形: 繰返し項目を分離→「従業員技能」表を作成。 2.第2正規形: 主キーの一部に従属する項目を分離→「従業員」表と「技能」表を作成。 3.第3正規形: 主キー以外に従属する項目を分離。この段階で分離は完了しているため、3つの表に分かれた状態が第3正規形です。"
    },
    {
        "id": 82,
        "category": "基本情報 R5/07",
        "question": "関係データベースにおいて、外部キーを定義する目的として、適切なものはどれか。",
        "options": [
            "関係する相互のテーブルにおいて、レコード間の参照一貫性が維持される制約をもたせる。",
            "関係する相互のテーブルの格納場所を近くに配置することによって、検索, 更新を高速に行う。",
            "障害によって破壊されたレコードを、テーブル間の相互の関係から可能な限り復旧させる。",
            "レコードの削除、追加の繰返しによる、レコード格納エリアのフラグメンテーションを防止する。"
        ],
        "correctAnswer": "関係する相互のテーブルにおいて、レコード間の参照一貫性が維持される制約をもたせる。",
        "explanation": "正解は「関係する相互のテーブルにおいて、レコード間の参照一貫性が維持される制約をもたせる。」です。外部キーは、他のテーブルの主キーを参照する列であり、これによってテーブル間の関連付けを行います。参照先のキーが存在しないようなデータを登録できなくするなど、データの整合性を保つ役割（参照整合性制約）を持ちます。"
    },
    {
        "id": 83,
        "category": "基本情報 R5/07",
        "question": "IPv4 ネットワークで用いられる可変長サブネットマスクとして、正しいものはどれか。",
        "options": [
            "255.255.255.1",
            "255.255.255.32",
            "255.255.255.64",
            "255.255.255.128"
        ],
        "correctAnswer": "255.255.255.128",
        "explanation": "正解は「255.255.255.128」です。サブネットマスクは、2進数で表現したときにネットワーク部を示す1が左から連続し、その後ホスト部を示す0が連続する形式でなければなりません。128は2進数で「10000000」となり、この条件を満たします。他の選択肢は2進数で1と0が混在するため不正です。"
    },
    {
        "id": 84,
        "category": "基本情報 R5/07",
        "question": "ルータがパケットの経路決定に用いる情報として、最も適切なものはどれか。",
        "options": [
            "宛先IPアドレス",
            "宛先MACアドレス",
            "発信元IPアドレス",
            "発信元MACアドレス"
        ],
        "correctAnswer": "宛先IPアドレス",
        "explanation": "正解は「宛先IPアドレス」です。ルータはOSI参照モデルの第3層（ネットワーク層）で動作する機器です。パケットのヘッダに含まれる宛先IPアドレスを見て、自身の持つ経路情報（ルーティングテーブル）と照らし合わせ、次にどのルータに転送すべきかを決定します。"
    },
    {
        "id": 89,
        "category": "基本情報 R5/07",
        "question": "アプリケーションソフトウェアにデジタル署名を施す目的はどれか。",
        "options": [
            "アプリケーションソフトウェアの改ざんを利用者が検知できるようにする。",
            "アプリケーションソフトウェアの使用を特定の利用者に制限する。",
            "アプリケーションソフトウェアの著作権が作成者にあることを証明する。",
            "アプリケーションソフトウェアの利用者による修正や改変を不可能にする。"
        ],
        "correctAnswer": "アプリケーションソフトウェアの改ざんを利用者が検知できるようにする。",
        "explanation": "正解は「アプリケーションソフトウェアの改ざんを利用者が検知できるようにする。」です。デジタル署名は、①作成者が正当であること（認証）、②データが改ざんされていないこと（完全性）を保証する技術です。これにより、利用者はソフトウェアが信頼できる作成者から提供され、配布途中で改ざんされていないことを確認できます。"
    },
    {
        "id": 92,
        "category": "基本情報 R5/07",
        "question": "DNS キャッシュサーバに対して外部から行われるキャッシュポイズニング攻撃への対策のうち、適切なものはどれか。",
        "options": [
            "外部ネットワークからの再帰的な問合せにも応答できるように、コンテンツサーバにキャッシュサーバを兼ねさせる。",
            "再帰的な問合せに対しては、内部ネットワークからのものだけを許可するように設定する。",
            "再帰的な問合せを行う際の送信元のポート番号を固定する。",
            "再帰的な問合せを行う際のトランザクションIDを固定する。"
        ],
        "correctAnswer": "再帰的な問合せに対しては、内部ネットワークからのものだけを許可するように設定する。",
        "explanation": "正解は「再帰的な問合せに対しては、内部ネットワークからのものだけを許可するように設定する。」です。DNSキャッシュポイズニングは、DNSキャッシュサーバに偽の情報を覚え込ませる攻撃です。外部からの再帰的問合せ（自分のドメイン外の名前解決依頼）を拒否することで、攻撃者がキャッシュを汚染する機会を減らすことができます。"
    },
    {
        "id": 93,
        "category": "基本情報 R5/07",
        "question": "セキュリティバイデザインの説明はどれか。",
        "options": [
            "開発済みのシステムに対して、第三者の情報セキュリティ専門家が脆弱性診断を行い、システムの品質及びセキュリティを高めることである。",
            "開発済みのシステムに対して、リスクアセスメントを行い、リスクアセスメント結果に基づいてシステムを改修することである。",
            "システムの運用において、第三者による監査結果を基にシステムを改修することである。",
            "システムの企画・設計段階からセキュリティを確保する方策のことである。"
        ],
        "correctAnswer": "システムの企画・設計段階からセキュリティを確保する方策のことである。",
        "explanation": "正解は「システムの企画・設計段階からセキュリティを確保する方策のことである。」です。セキュリティバイデザインは、開発の初期段階（企画・設計）からセキュリティを考慮に入れることで、手戻りを減らし、より安全なシステムを構築するという考え方です。"
    },
    {
        "id": 95,
        "category": "基本情報 R5/07",
        "question": "オブジェクト指向における基底クラスと派生クラスの関係にあるものはどれか。",
        "options": [
            "“会社”と“社員”",
            "“自動車”と“エンジン”",
            "“図形”と“三角形”",
            "“人間”と“頭”"
        ],
        "correctAnswer": "“図形”と“三角形”",
        "explanation": "正解は「“図形”と“三角形”」です。基底クラス（親）と派生クラス（子）の関係は、「is-a (〜は〜の一種である)」関係で表されます。「三角形は図形の一種である」は成り立ちますが、他の選択肢は「has-a (〜は〜を持つ)」関係です。"
    },
    {
        "id": 96,
        "category": "基本情報 R5/07",
        "question": "ソフトウェアの品質特性の定義において、あるコンピュータ用に作成したプログラムを別のアーキテクチャのコンピュータで動作できるようにすることの容易さを表す特性はどれか。",
        "options": [
            "移植性(Portability)",
            "相互性(Compatibility)",
            "修正性(Modifiability)",
            "使用性(Usability)"
        ],
        "correctAnswer": "移植性(Portability)",
        "explanation": "正解は「移植性(Portability)」です。移植性とは、あるソフトウェアを異なる環境（OS、ハードウェアなど）で動作させる際の容易さの度合いを示す品質特性です。"
    },
    {
        "id": 97,
        "category": "基本情報 R5/07",
        "question": "構造化プログラミングにおいて、プログラムを作成するときに用いる三つの制御構造はどれか。",
        "options": [
            "繰返し、再帰, 順次",
            "繰返し、再帰, 選択",
            "繰返し、順次, 選択",
            "再帰, 順次, 選択"
        ],
        "correctAnswer": "繰返し、順次, 選択",
        "explanation": "正解は「繰返し、順次, 選択」です。構造化プログラミングでは、どのような複雑なプログラムも「順次（上から下へ処理）」「選択（if文などによる条件分岐）」「繰返し（for文やwhile文によるループ）」の3つの基本制御構造の組み合わせで記述できるとされています。"
    },
    {
        "id": 98,
        "category": "基本情報 R5/07",
        "question": "マッシュアップの説明はどれか。",
        "options": [
            "既存のプログラムから、そのプログラムの仕様を導き出す。",
            "既存のプログラムを部品化し、それらの部品を組み合わせて、新規プログラムを開発する。",
            "クラスライブラリを利用して、新規プログラムを開発する。",
            "公開されている複数のサービスを利用して、新たなサービスを提供する。"
        ],
        "correctAnswer": "公開されている複数のサービスを利用して、新たなサービスを提供する。",
        "explanation": "正解は「公開されている複数のサービスを利用して、新たなサービスを提供する。」です。マッシュアップとは、Web上で公開されている複数のAPIやサービスを組み合わせて、新しい独自のサービスを作り出す手法です。例えば、地図情報サービスと店舗情報を組み合わせて、新しい地図アプリを作るなどが該当します。"
    },
    {
        "id": 100,
        "category": "基本情報 R5/07",
        "question": "アジャイル開発などで導入されている“ペアプログラミング”の説明はどれか。",
        "options": [
            "開発工程の初期段階に要求仕様を確認するために、プログラマと利用者がペアとなり、試作した画面や帳票を見て、相談しながらプログラムの開発を行う。",
            "効率よく開発するために、2人のプログラマがペアとなり、メインプログラムとサブプログラムを分担して開発を行う。",
            "短期間で開発するために、2人のプログラマがペアとなり、交互に作業と休憩を繰り返しながら長時間にわたって連続でプログラムの開発を行う。",
            "品質の向上や知識の共有を図るために、2人のプログラマがペアとなり、その場で相談したりレビューしたりしながら、一つのプログラムの開発を行う。"
        ],
        "correctAnswer": "品質の向上や知識の共有を図るために、2人のプログラマがペアとなり、その場で相談したりレビューしたりしながら、一つのプログラムの開発を行う。",
        "explanation": "正解は「品質の向上や知識の共有を図るために、2人のプログラマがペアとなり、その場で相談したりレビューしたりしながら、一つのプログラムの開発を行う。」です。ペアプログラミングは、2人の開発者が1台のPCを使い、一人がコードを書く「ドライバ」、もう一人がそれをレビューし助言する「ナビゲータ」として共同で作業を進める手法です。"
    },
    {
        "id": 101,
        "category": "基本情報 R5/07",
        "question": "プロジェクトで発生している品質問題を解決するに当たって、図を作成して原因の傾向を分析したところ、発生した問題の80%以上が少数の原因で占められていることが判明した。作成した図はどれか。",
        "options": [
            "管理図",
            "散布図",
            "特性要因図",
            "パレート図"
        ],
        "correctAnswer": "パレート図",
        "explanation": "正解は「パレート図」です。パレート図は、項目を大きい順に並べた棒グラフと、その累積構成比を示す折れ線グラフを組み合わせた図です。「結果の8割は、全体の2割の要因が生み出している」というパレートの法則を可視化するのに用いられ、品質管理において重要な問題点を特定するのに役立ちます。"
    },
    {
        "id": 102,
        "category": "基本情報 R5/07",
        "question": "プロジェクトマネジメントにおいてパフォーマンス測定に使用するEVMの管理対象の組みはどれか。",
        "options": [
            "コスト、スケジュール",
            "コスト、リスク",
            "スケジュール, 品質",
            "品質、リスク"
        ],
        "correctAnswer": "コスト、スケジュール",
        "explanation": "正解は「コスト、スケジュール」です。EVM (Earned Value Management)は、プロジェクトの進捗を「コスト」と「スケジュール」の2つの側面から定量的に測定・分析する手法です。計画値、実績値、出来高を比較することで、プロジェクトのパフォーマンスを評価します。"
    },
    {
        "id": 103,
        "category": "基本情報 R5/07",
        "question": "ミッションクリティカルシステムの意味として、適切なものはどれか。",
        "options": [
            "OSなどのように、業務システムを稼働させる上で必要不可欠なシステム",
            "システム運用条件が、性能の限界に近い状態の下で稼働するシステム",
            "障害が起きると、企業活動や社会に重大な影響を及ぼすシステム",
            "先行して試験導入され、成功すると本格的に導入されるシステム"
        ],
        "correctAnswer": "障害が起きると、企業活動や社会に重大な影響を及ぼすシステム",
        "explanation": "正解は「障害が起きると、企業活動や社会に重大な影響を及ぼすシステム」です。ミッションクリティカルシステムとは、企業の事業遂行（ミッション）に不可欠で、停止や誤作動が許されない極めて重要なシステムを指します。銀行の勘定系システムや、交通機関の運行管理システムなどが該当します。"
    },
    {
        "id": 105,
        "category": "基本情報 R5/07",
        "question": "事業継続計画(BCP) について監査を実施した結果、適切な状況と判断されるものはどれか。",
        "options": [
            "従業員の緊急連絡先リストを作成し、最新版に更新している。",
            "重要書類は複製せずに、1か所で集中保管している。",
            "全ての業務について、優先順位なしに同一水準のBCPを策定している。",
            "平時にはBCPを従業員に非公開としている。"
        ],
        "correctAnswer": "従業員の緊急連絡先リストを作成し、最新版に更新している。",
        "explanation": "正解は「従業員の緊急連絡先リストを作成し、最新版に更新している。」です。BCP (Business Continuity Plan)は、災害などの緊急時に事業を継続・早期復旧させるための計画です。従業員の安否確認は初動対応として非常に重要であり、連絡先リストの整備と更新はその基本となります。"
    },
    {
        "id": 106,
        "category": "基本情報 R5/07",
        "question": "IT 投資の評価手法のうち、バランススコアカードを用いた手法を説明したものはどれか。",
        "options": [
            "IT 投資の効果をキャッシュフローから求めた正味現在価値を用いて評価することによって、他の投資案件との比較を容易にする。",
            "IT 投資をその性質やリスクの共通性によってカテゴリに分類し、カテゴリ単位での投資割合を評価することによって、経営戦略と IT投資の整合性を確保する。",
            "財務, 顧客, 内部業務プロセスなど複数の視点ごとに IT 投資の業績評価指標を設定し、経営戦略との適合性を評価することで、IT 投資効果を多面的に評価する。",
            "初期投資に対する価値に加えて、将来において選択可能な収益やリスクの期待値 を、金融市場で使われるオプション価格付け理論に基づいて評価する。"
        ],
        "correctAnswer": "財務, 顧客, 内部業務プロセスなど複数の視点ごとに IT 投資の業績評価指標を設定し、経営戦略との適合性を評価することで、IT 投資効果を多面的に評価する。",
        "explanation": "正解は「財務, 顧客, 内部業務プロセスなど複数の視点ごとに IT 投資の業績評価指標を設定し、経営戦略との適合性を評価することで、IT 投資効果を多面的に評価する。」です。バランススコアカード(BSC)は、「財務」「顧客」「内部業務プロセス」「学習と成長」の4つの視点から業績を評価する経営管理手法であり、IT投資評価にも応用されます。"
    },
    {
        "id": 107,
        "category": "基本情報 R5/07",
        "question": "企業がマーケティング活動に活用するビッグデータの特徴に沿った取扱いとして、適切なものはどれか。",
        "options": [
            "ソーシャルメディアで個人が発信する商品のクレーム情報などの、不特定多数によるデータは処理の対象にすべきではない。",
            "蓄積した静的なデータだけでなく、 Web サイトのアクセス履歴などリアルタイム性の高いデータも含めて処理の対象とする。",
            "データ全体から無作為にデータをサンプリングして、それらを分析することによって全体の傾向を推し量る。",
            "データの正規化が難しい非構造化データである音声データや画像データは、処理の対象にすべきではない。"
        ],
        "correctAnswer": "蓄積した静的なデータだけでなく、 Web サイトのアクセス履歴などリアルタイム性の高いデータも含めて処理の対象とする。",
        "explanation": "正解は「蓄積した静的なデータだけでなく、 Web サイトのアクセス履歴などリアルタイム性の高いデータも含めて処理の対象とする。」です。ビッグデータは量(Volume)だけでなく、生成速度(Velocity)や多様性(Variety)も特徴です。リアルタイム性の高いデータや、SNS投稿・音声・画像などの非構造化データも分析対象とすることで、新たな知見を得ることができます。"
    },
    {
        "id": 109,
        "category": "基本情報 R5/07",
        "question": "競争上のポジションで、ニッチャの基本戦略はどれか。",
        "options": [
            "シェア追撃などのリーダ攻撃に必要な差別化戦略",
            "市場チャンスに素早く対応する模倣戦略",
            "製品, 市場の専門特化を図る特定化戦略",
            "全市場をカバーし、最大シェアを確保する全方位戦略"
        ],
        "correctAnswer": "製品, 市場の専門特化を図る特定化戦略",
        "explanation": "正解は「製品, 市場の専門特化を図る特定化戦略」です。ニッチャ（Nicher）は、大手企業が参入しないような特定の小さな市場（ニッチ市場）に経営資源を集中し、専門化・特定化することで独自の地位を築く戦略をとります。"
    },
    {
        "id": 113,
        "category": "基本情報 R5/07",
        "question": "IoT の構成要素に関する記述として、適切なものはどれか。",
        "options": [
            "アナログ式の機器を除く、デジタル式の機器が対象となる。",
            "インターネット又は閉域網に接続できる全てのものが対象となる。",
            "自律的にデータを収集してデータ分析を行う機器だけが対象となる。",
            "人や生物を除く、形のある全てのものが対象となる。"
        ],
        "correctAnswer": "インターネット又は閉域網に接続できる全てのものが対象となる。",
        "explanation": "正解は「インターネット又は閉域網に接続できる全てのものが対象となる。」です。IoT (Internet of Things)は「モノのインターネット」と訳され、従来インターネットに接続されていなかった様々なモノ（センサー、家電、自動車、工場機械など）がネットワークを通じて相互に情報をやり取りする仕組み全般を指します。"
    },
    {
        "id": 114,
        "category": "基本情報 R5/07",
        "question": "ブロックチェーンによって実現されている仮想通貨マイニングの説明はどれか。",
        "options": [
            "仮想通貨取引の確認や記録の計算作業に参加し、報酬として仮想通貨を得る。",
            "仮想通貨を売買することによってキャピタルゲインを得る。",
            "個人や組織に対して、仮想通貨による送金を行う。",
            "実店舗などで仮想通貨を使った支払や決済を行う。"
        ],
        "correctAnswer": "仮想通貨取引の確認や記録の計算作業に参加し、報酬として仮想通貨を得る。",
        "explanation": "正解は「仮想通貨取引の確認や記録の計算作業に参加し、報酬として仮想通貨を得る。」です。マイニング（採掘）とは、仮想通貨の新たな取引記録をブロックチェーンに追記する際に行われる、膨大な計算作業のことです。この計算に成功した人（マイナー）は、報酬として新規発行された仮想通貨を受け取ることができます。"
    },
    {
        "id": 115,
        "category": "基本情報 R5/07",
        "question": "クラウドソーシングの説明はどれか。",
        "options": [
            "インターネット上での商取引の決済手段として、デジタルデータ化された貨幣を使用する。",
            "企業や起業家がインターネット上で事業資金を必要とする目的や内容を告知し、資金提供者を募集する。",
            "商品の売手がインターネット上で対象商品の内容や希望する販売条件を告知し、入札者が価格を競い落札する。",
            "発注者がインターネット上で発注対象の業務内容や発注条件を告知し、受注者を募集する。"
        ],
        "correctAnswer": "発注者がインターネット上で発注対象の業務内容や発注条件を告知し、受注者を募集する。",
        "explanation": "正解は「発注者がインターネット上で発注対象の業務内容や発注条件を告知し、受注者を募集する。」です。クラウドソーシングは、企業などがインターネットを通じて不特定多数の群衆（クラウド）に業務をアウトソーシング（委託）する形態です。"
    },
    {
        "id": 117,
        "category": "基本情報 R5/07",
        "question": "商品の1日当たりの販売個数の予想確率が表のとおりであるとき、1個当たりの利益を1,000円とすると、利益の期待値が最大になる仕入個数は何個か。ここで、仕入れた日に売れ残った場合 1個当たり300円の廃棄ロスが出るものとする。\n(販売確率: 4個30%, 5個30%, 6個30%, 7個10%)",
        "options": [
            "4",
            "5",
            "6",
            "7"
        ],
        "correctAnswer": "6",
        "explanation": "各仕入数での利益期待値を計算します。売上=min(仕入,販売)×1000, 廃棄ロス=max(0, 仕入-販売)×300。仕入5:(5×1000)×0.7+(4×1000-1×300)×0.3=4610。仕入6:(6×1000)×0.4+(5×1000-1×300)×0.3+(4×1000-2×300)×0.3=4830。仕入7:(7×1000)×0.1+(6×1000-1×300)×0.3+(5×1000-2×300)×0.3+(4×1000-3×300)×0.3=4690。よって6個が最大となります。"
    },
    {
        "id": 119,
        "category": "基本情報 R5/07",
        "question": "財務諸表のうち、一定時点における企業の資産、負債及び純資産を表示し、企業の財政状態を明らかにするものはどれか。",
        "options": [
            "株主資本等変動計算書",
            "キャッシュフロー計算書",
            "損益計算書",
            "貸借対照表"
        ],
        "correctAnswer": "貸借対照表",
        "explanation": "正解は「貸借対照表」です。貸借対照表（B/S）は、決算日という「一定時点」での企業の財政状態（資産、負債、純資産の状況）を示す報告書です。一方、損益計算書（P/L）は「一定期間」の経営成績を示します。"
    }
];


/**
 * ============================================
 * アプリケーションロジック
 * ============================================
 */
document.addEventListener('DOMContentLoaded', () => {

    // --- 状態管理の変数 ---
    let allProblems = [...problemData]; // すべての問題
    let currentQuizProblems = []; // 現在のクイズセッションの問題リスト
    let currentIndex = 0; // 現在の問題番号 (0-indexed)
    let currentMode = 'sequential'; // 'sequential', 'random', 'infinite'
    let score = 0; // 正解数
    let isAnswered = false; // 回答済みかどうかのフラグ

    // --- DOM要素の取得 ---
    const screens = {
        home: document.getElementById('home-screen'),
        quiz: document.getElementById('quiz-screen'),
        result: document.getElementById('result-screen'),
    };

    const homeButtons = document.querySelectorAll('#home-screen button');
    
    const quizElements = {
        category: document.getElementById('quiz-category'),
        progress: document.getElementById('quiz-progress'),
        question: document.getElementById('question-area'),
        optionsContainer: document.getElementById('options-container'),
        feedback: document.getElementById('feedback-area'),
        feedbackResult: document.getElementById('feedback-result'),
        feedbackExplanation: document.getElementById('feedback-explanation'),
        nextButton: document.getElementById('next-button'),
        homeButton: document.getElementById('home-button'),
    };

    const resultElements = {
        summary: document.getElementById('result-summary'),
        restartButton: document.getElementById('restart-button'),
        restartModeText: document.getElementById('restart-mode-text'),
        backToHomeButton: document.getElementById('back-to-home-button'),
    };

    // --- ユーティリティ関数 ---

    /**
     * 配列をランダムにシャッフルする (Fisher-Yatesアルゴリズム)
     * @param {Array} array シャッフルする配列
     * @returns {Array} シャッフルされた新しい配列
     */
    function shuffleArray(array) {
        const newArray = [...array]; // 元の配列をコピー
        for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
    }

    /**
     * 指定された画面に切り替える
     * @param {string} screenName 'home', 'quiz', 'result' のいずれか
     */
    function switchScreen(screenName) {
        Object.values(screens).forEach(screen => {
            screen.classList.remove('active');
        });
        if (screens[screenName]) {
            screens[screenName].classList.add('active');
        }
    }

    // --- メインロジック関数 ---

    /**
     * クイズセッションを開始する
     * @param {string} mode 'sequential', 'random', 'infinite'
     */
    function startQuiz(mode) {
        currentMode = mode;
        currentIndex = 0;
        score = 0;

        // 問題リストを準備
        if (mode === 'sequential') {
            currentQuizProblems = [...allProblems];
        } else { // 'random' または 'infinite'
            currentQuizProblems = shuffleArray(allProblems); 
        }

        // 最初の問題を表示
        displayQuestion();
        switchScreen('quiz');
    }

    /**
     * 現在の問題を画面に表示する
     */
    function displayQuestion() {
        isAnswered = false; // 回答フラグをリセット
        const problem = currentQuizProblems[currentIndex];
        
        if (!problem) {
            console.error("問題が見つかりません。");
            showResult();
            return;
        }

        quizElements.category.textContent = problem.category;
        
        if (currentMode !== 'infinite') {
            quizElements.progress.textContent = `${currentIndex + 1} / ${currentQuizProblems.length}`;
            quizElements.progress.style.display = 'inline';
        } else {
            quizElements.progress.style.display = 'none';
        }
        
        quizElements.question.textContent = problem.question;
        quizElements.optionsContainer.innerHTML = '';
        
        const options = problem.options; 
        const prefixes = ["ア", "イ", "ウ", "エ"];

        options.forEach((optionText, index) => {
            const button = document.createElement('button');
            button.textContent = prefixes[index] + ". " + optionText;
            button.className = 'btn btn-option w-full';
            button.addEventListener('click', () => handleOptionClick(optionText, problem.correctAnswer));
            quizElements.optionsContainer.appendChild(button);
        });

        quizElements.feedback.classList.add('hidden');
        quizElements.nextButton.classList.add('hidden');
    }

    /**
     * 選択肢がクリックされた時の処理
     * @param {string} selectedAnswer ユーザーが選んだ答え
     * @param {string} correctAnswer 正しい答え
     */
    function handleOptionClick(selectedAnswer, correctAnswer) {
        if (isAnswered) return;
        isAnswered = true;

        const problem = currentQuizProblems[currentIndex];
        const buttons = quizElements.optionsContainer.querySelectorAll('button');

        if (selectedAnswer === correctAnswer) {
            quizElements.feedbackResult.textContent = '正解！';
            quizElements.feedbackResult.style.color = '#15803d'; // green-700
            score++;
        } else {
            quizElements.feedbackResult.textContent = '不正解...';
            quizElements.feedbackResult.style.color = '#b91c1c'; // red-700
        }

        quizElements.feedbackExplanation.textContent = problem.explanation;
        quizElements.feedback.classList.remove('hidden');

        buttons.forEach(button => {
            button.disabled = true;
            const optionTextOnly = button.textContent.substring(button.textContent.indexOf(". ") + 2);
            
            if (optionTextOnly === correctAnswer) {
                button.classList.add('correct');
            } else if (optionTextOnly === selectedAnswer) {
                button.classList.add('incorrect');
            }
        });

        quizElements.nextButton.classList.remove('hidden');
    }

    /**
     * 「次へ」ボタンが押された時の処理
     */
    function nextQuestion() {
        currentIndex++;

        if (currentIndex < currentQuizProblems.length) {
            displayQuestion();
        } else {
            if (currentMode !== 'infinite') {
                showResult();
            } else {
                currentIndex = 0;
                currentQuizProblems = shuffleArray(allProblems); 
                displayQuestion();
            }
        }
    }

    /**
     * 結果画面を表示する
     */
    function showResult() {
        resultElements.summary.textContent = `${currentQuizProblems.length}問中 ${score}問正解しました。`;
        
        let modeText = '';
        if (currentMode === 'sequential') modeText = '順番に';
        if (currentMode === 'random') modeText = 'ランダムで';
        if (currentMode === 'infinite') modeText = '無限モードで';

        resultElements.restartModeText.textContent = modeText;
        switchScreen('result');
    }

    /**
     * ホーム画面に戻る
     */
    function goToHome() {
        switchScreen('home');
    }

    // --- イベントリスナーの登録 ---

    homeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const mode = button.getAttribute('data-mode');
            if (mode) {
                startQuiz(mode);
            }
        });
    });

    quizElements.nextButton.addEventListener('click', nextQuestion);
    quizElements.homeButton.addEventListener('click', goToHome);

    resultElements.restartButton.addEventListener('click', () => {
        startQuiz(currentMode);
    });
    resultElements.backToHomeButton.addEventListener('click', goToHome);

    // --- アプリの初期化 ---
    switchScreen('home');

});
    </script>
</body>
</html>
